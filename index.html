<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A simple, clean, and functional calculator web application.">
    <meta name="license" content="MIT">
    <!--
    MIT License

    Copyright (c) 2023 AI Developer

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
    SOFTWARE.
    -->
    <title>Simple Calculator</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f8f9fa; /* Light background */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(4, 75px); /* 4 columns, 75px each */
            grid-template-rows: minmax(100px, auto) minmax(20px, auto) repeat(5, 75px); /* Display, Error, 5 button rows */
            gap: 5px;
            background-color: #343a40; /* Dark background for calculator body */
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            width: fit-content; /* Adjust width to content */
        }

        #calculator-display {
            grid-column: 1 / -1; /* Span across all columns */
            background-color: #212529; /* Even darker for display */
            color: #fff;
            font-size: 2.5em;
            text-align: right;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 5px; /* Reduced margin to make space for error message */
            overflow: hidden;
            word-wrap: break-word; /* Ensure long numbers wrap */
            border: none; /* Remove default input border */
            outline: none; /* Remove outline on focus */
            height: 100px; /* Fixed height for display */
        }

        .calculator-grid > button {
            cursor: pointer;
            font-size: 1.5em;
            border: none;
            outline: none;
            background-color: rgba(255, 255, 255, .75);
            border-radius: 8px;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            color: #343a40;
        }

        .calculator-grid > button:hover {
            background-color: rgba(255, 255, 255, .9);
            transform: scale(1.02);
        }

        .calculator-grid > button:active {
            transform: scale(0.98);
        }

        .operator {
            background-color: #ffc107 !important; /* Yellow for operators */
            color: #343a40 !important;
        }

        .operator:hover {
             background-color: #ffca2c !important;
        }

        .equals-button {
            background-color: #198754 !important; /* Green for equals */
            color: white !important;
            grid-column: span 2; /* Span two columns */
        }

        .equals-button:hover {
            background-color: #157347 !important;
        }

        .clear-button {
            background-color: #dc3545 !important; /* Red for clear */
            color: white !important;
            grid-column: span 2; /* Span two columns */
        }

        .clear-button:hover {
            background-color: #c82333 !important;
        }

        .delete-button {
            background-color: #6c757d !important; /* Gray for delete */
            color: white !important;
        }
        .delete-button:hover {
            background-color: #5a6268 !important;
        }

        #error-message {
            grid-column: 1 / -1;
            color: #dc3545; /* Red for error messages */
            text-align: center;
            font-size: 0.9em;
            margin-bottom: 5px;
            height: 20px; /* Reserve space */
            line-height: 20px;
        }
    </style>
</head>
<body>
    <!-- README for GitHub Pages -->
    <!--
    # Simple Calculator App

    This is a minimalist, single-page web application that functions as a basic calculator.
    It's built with pure HTML, CSS, and JavaScript, enhanced with Bootstrap for a clean and responsive design.

    ## Features:
    - Basic arithmetic operations: Addition, Subtraction, Multiplication, Division.
    - Clear (AC) and Delete (DEL) functionality.
    - Handles decimal numbers.
    - Includes error handling for division by zero and invalid operations.
    - Visually clean and professional interface.
    - Keyboard support for numbers, operators, Enter/Equals, Backspace, and Escape (for clear).

    ## How to Use:
    1. Enter numbers using the number buttons or your keyboard.
    2. Select an operation (+, -, *, /) using buttons or keyboard.
    3. Enter the second number.
    4. Press '=' or 'Enter' to see the result.
    5. Use 'AC' or 'Escape' to clear all input, or 'DEL' or 'Backspace' to remove the last digit.

    ## License:
    This project is open-source and available under the MIT License.
    -->
    <div class="calculator-grid">
        <input type="text" id="calculator-display" class="form-control" value="0" readonly>
        <div id="error-message"></div>

        <button class="clear-button" id="clear-button">AC</button>
        <button class="delete-button" id="delete-button">DEL</button>
        <button class="operator" id="divide-button">/</button>

        <button class="number-button" id="number-7">7</button>
        <button class="number-button" id="number-8">8</button>
        <button class="number-button" id="number-9">9</button>
        <button class="operator" id="multiply-button">*</button>

        <button class="number-button" id="number-4">4</button>
        <button class="number-button" id="number-5">5</button>
        <button class="number-button" id="number-6">6</button>
        <button class="operator" id="subtract-button">-</button>

        <button class="number-button" id="number-1">1</button>
        <button class="number-button" id="number-2">2</button>
        <button class="number-button" id="number-3">3</button>
        <button class="operator" id="add-button">+</button>

        <button class="number-button" id="number-0">0</button>
        <button class="number-button" id="decimal-button">.</button>
        <button class="equals-button" id="equals-button">=</button>
    </div>

    <!-- Bootstrap JS CDN (optional, but good practice if using Bootstrap components) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script>
        class Calculator {
            constructor(displayElement, errorMessageElement) {
                this.displayElement = displayElement;
                this.errorMessageElement = errorMessageElement;
                this.clear();
            }

            clear() {
                this.currentOperand = '0';
                this.previousOperand = '';
                this.operation = undefined;
                this.hasError = false;
                this.clearError();
                this.updateDisplay();
            }

            delete() {
                if (this.currentOperand === '0' || this.hasError) return;
                this.currentOperand = this.currentOperand.toString().slice(0, -1);
                if (this.currentOperand === '') {
                    this.currentOperand = '0';
                }
                this.updateDisplay();
            }

            appendNumber(number) {
                if (this.hasError) { // If there was an error, start fresh
                    this.clear();
                }
                if (number === '.' && this.currentOperand.includes('.')) return;
                if (this.currentOperand === '0' && number !== '.') {
                    this.currentOperand = number.toString();
                } else {
                    this.currentOperand = this.currentOperand.toString() + number.toString();
                }
                this.updateDisplay();
            }

            chooseOperation(operation) {
                if (this.hasError) return;
                if (this.currentOperand === '') return; // No number to operate on
                if (this.previousOperand !== '') {
                    this.compute(); // If there's a previous operand, compute first
                }
                this.operation = operation;
                this.previousOperand = this.currentOperand;
                this.currentOperand = '';
                this.updateDisplay();
            }

            compute() {
                let computation;
                const prev = parseFloat(this.previousOperand);
                const current = parseFloat(this.currentOperand);
                if (isNaN(prev) || isNaN(current)) {
                    this.setError('Invalid input');
                    return;
                }
                switch (this.operation) {
                    case '+':
                        computation = prev + current;
                        break;
                    case '-':
                        computation = prev - current;
                        break;
                    case '*':
                        computation = prev * current;
                        break;
                    case '/':
                        if (current === 0) {
                            this.setError('Cannot divide by zero!');
                            return;
                        }
                        computation = prev / current;
                        break;
                    default:
                        return;
                }
                this.currentOperand = computation.toString();
                this.operation = undefined;
                this.previousOperand = '';
                this.updateDisplay();
            }

            setError(message) {
                this.errorMessageElement.innerText = message;
                this.hasError = true;
                this.currentOperand = 'Error';
                this.previousOperand = '';
                this.operation = undefined;
                this.displayElement.value = this.currentOperand; // Immediately show error on display
            }

            clearError() {
                this.errorMessageElement.innerText = '';
                this.hasError = false;
            }

            getDisplayNumber(number) {
                const stringNumber = number.toString();
                const integerDigits = parseFloat(stringNumber.split('.')[0]);
                const decimalDigits = stringNumber.split('.')[1];
                let integerDisplay;
                if (isNaN(integerDigits)) {
                    integerDisplay = '';
                } else {
                    // Use Intl.NumberFormat for thousands separators, but only for integer part
                    integerDisplay = new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 }).format(integerDigits);
                }
                if (decimalDigits != null) {
                    return `${integerDisplay}.${decimalDigits}`;
                } else {
                    return integerDisplay;
                }
            }

            updateDisplay() {
                this.clearError(); // Clear any previous error message

                if (this.hasError) {
                    this.displayElement.value = 'Error';
                    return;
                }

                const currentDisplay = this.getDisplayNumber(this.currentOperand);
                const previousDisplay = this.getDisplayNumber(this.previousOperand);

                if (this.operation != null) {
                    if (this.currentOperand === '') {
                        // After choosing an operation, before entering second number
                        this.displayElement.value = `${previousDisplay} ${this.operation}`;
                    } else {
                        // Showing previous, operation, and current input
                        this.displayElement.value = `${previousDisplay} ${this.operation} ${currentDisplay}`;
                    }
                } else {
                    // Showing current operand or initial '0'
                    this.displayElement.value = currentDisplay;
                }

                // Special case for initial '0' after clear or on load if current is empty
                if (this.currentOperand === '' && this.previousOperand === '' && this.operation === undefined) {
                    this.displayElement.value = '0';
                }
            }
        }

        const displayElement = document.getElementById('calculator-display');
        const errorMessageElement = document.getElementById('error-message');
        const numberButtons = document.querySelectorAll('.number-button');
        const operationButtons = document.querySelectorAll('.operator');
        const equalsButton = document.getElementById('equals-button');
        const clearButton = document.getElementById('clear-button');
        const deleteButton = document.getElementById('delete-button');

        const calculator = new Calculator(displayElement, errorMessageElement);

        numberButtons.forEach(button => {
            button.addEventListener('click', () => {
                calculator.appendNumber(button.innerText);
            });
        });

        operationButtons.forEach(button => {
            button.addEventListener('click', () => {
                calculator.chooseOperation(button.innerText);
            });
        });

        equalsButton.addEventListener('click', () => {
            calculator.compute();
            // updateDisplay is called inside compute if successful, or setError if not.
            // No need to call it again here.
        });

        clearButton.addEventListener('click', () => {
            calculator.clear();
        });

        deleteButton.addEventListener('click', () => {
            calculator.delete();
        });

        // Keyboard support
        document.addEventListener('keydown', e => {
            if (e.key >= '0' && e.key <= '9') {
                calculator.appendNumber(e.key);
            } else if (e.key === '.') {
                calculator.appendNumber('.');
            } else if (e.key === '+' || e.key === '-' || e.key === '*' || e.key === '/') {
                calculator.chooseOperation(e.key);
            } else if (e.key === 'Enter' || e.key === '=') {
                e.preventDefault(); // Prevent default 'Enter' behavior (e.g., form submission)
                calculator.compute();
            } else if (e.key === 'Backspace') {
                calculator.delete();
            } else if (e.key === 'Escape') {
                calculator.clear();
            }
        });

    </script>
</body>
</html>